/* === Figma-inspired surface + tokens (light theme) === */
:root{
  --surface:#ffffff;
  --surface-2:#fafbff;
  /* slightly darker than card body for headers */
  --surface-header:#f6f8fc;
  --border:#e6e9f0;
  --text:#0f172a;
  --muted:#6b7280;
  --radius:14px;
  --shadow-1:0 1px 2px rgba(16,24,40,.06), 0 8px 24px rgba(16,24,40,.06);
  --shadow-2:0 2px 6px rgba(16,24,40,.08), 0 16px 40px rgba(16,24,40,.08);
}

body {
  background-color: #f4f6f8;   /* light gray-off white */
}

html {
    scroll-behavior: smooth;
  }

  .card{
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius);
    box-shadow:var(--shadow-1);
  }
  .card--elev{ box-shadow:var(--shadow-2); }

  /* === Project Details === */
.project-details{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.project-details__title{
  font-weight:700;
  letter-spacing:.2px;
}
.project-details__body{
  font-size:.95rem;
  color:var(--muted);
}

/* === Figma (Tailwind) gradient variants + icon slot === */
.kpi{
  position: relative;
  padding:18px 22px;
  border-radius:16px;
  border: none;
  color:#fff;                  /* White text on vibrant cards */
  box-shadow: 0 8px 30px rgba(0,0,0,.12);
  overflow: hidden;
}

/* === Solid background variants === */
.kpi--blue   { background:#2563EB; color:#fff; }
.kpi--purple { background:#7C3AED; color:#fff; }
.kpi--green  { background:#22C55E; color:#fff; }
.kpi--red    { background:#EF4444; color:#fff; }

.kpi-label{
  display:block;
  font-size:.9rem;
  font-weight:700;
  letter-spacing:.2px;           /* slightly tighter than before */
  text-transform:uppercase;
  white-space:nowrap;            /* no wrap */
  word-break:keep-all;           /* don't break around slashes */
  overflow:hidden;
  text-overflow:ellipsis;        /* if ever too long, truncate with … */
  max-width: 100%;
}

.kpi-row{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:8px;
  flex-wrap: wrap;             /* allow secondary line */
}

.kpi-value{
  font-size:2.4rem;
  font-weight:900;
  line-height:1;
  letter-spacing:.3px;
}

.kpi-delta{
  font-size:.9rem;
  font-weight:700;
  padding:6px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.18);
  border: 1px solid rgba(255,255,255,.24);
  color:#fff;
  white-space: nowrap;
}

/* Make all KPI cards equal height */
.kpi{ min-height: 132px; }              /* adjust to your taste: 112–140px works well */
.kpi .card-body{ height: 100%; }

/* Optional: keep the row content vertically centered */
.kpi-row{ align-items: center; }

/* top-right icon “chip” */
.kpi__icon{
  position:absolute;
  top:10px;
  right:12px;
  width:28px;
  height:28px;
  display:grid;
  place-items:center;
  border-radius:10px;
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.24);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.18);
}

.kpi .card-body{
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.kpi-value{
  white-space: nowrap;     /* <-- prevents '4.35' and 'MT' from splitting */
  display: inline-block;
  max-width: 100%;
}

/* Secondary metric on its own line */
.kpi-delta{
  flex: 0 0 100%;          /* take full width on next line */
  text-align: right;       /* align to the right edge */
  margin-top: 4px;
}



/* === Section header & legend === */
.section-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom:6px;
}
.section-title{ font-size:1.35rem; font-weight:800; color:var(--text); }
.section-sub{ color:var(--muted); font-size:.95rem; }

.legend{ display:flex; gap:14px; align-items:center; }
.legend__item{ display:flex; align-items:center; gap:8px; font-weight:600; }
.legend__dot{ width:14px; height:14px; border-radius:4px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.04); }

.dot--delivered{ background:#16A34A; }  /* green 600 */
.dot--lost{ background:#EF4444; }       /* red 500 */

/* === Segmented control (style radio as pills) === */
.segment{
  display:flex; gap:8px; background:#fff; border:1px solid var(--border);
  padding:4px; border-radius:12px; box-shadow:var(--shadow-1);
}
.segment input[type="radio"]{ display:none; }
.segment label{
  padding:8px 12px; border-radius:8px; cursor:pointer; user-select:none;
  font-weight:700; font-size:.92rem; color:#111827;
}
/* highlight the selected radio (label that HAS a checked input) */
.segment label:has(input[type="radio"]:checked){
  background:#0B1020; color:#fff;
  box-shadow:0 1px 2px rgba(0,0,0,.1), 0 6px 18px rgba(0,0,0,.12);
}

/* === AVP list (left card) === */
.avp-wrap{ height:460px; overflow:auto; padding-right:4px; }
.avp-item{
  background:var(--surface); border:1px solid var(--border); border-radius:12px;
  padding:12px 14px; margin:12px 0; box-shadow:var(--shadow-1);
}
.avp-item { cursor: pointer; }
.avp-item:hover { box-shadow: var(--shadow-2); }
/* AVP rows: tooltip/click hit-area should cover the whole row */
/* AVP rows: row is clickable; overlay provides row-wide hover + optional click target */
.avp-item { position: relative; cursor: pointer; }

/* Full-row overlay that can receive hover and clicks */
.avp-tip-overlay{
  position: absolute;
  inset: 0;
  pointer-events: auto;
  z-index: 1;
}

/* Tooltip target fills the overlay so hover works anywhere on the row */
.avp-tip-fill{
  position: absolute;
  inset: 0;
  display: block;
}

.avp-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px; }
.avp-name{ font-weight:800; color:#111827; }
.avp-pct{ padding:4px 8px; border-radius:999px; font-weight:700; font-size:.85rem; }
.avp-pct.good{ background:rgba(22,163,74,.12); color:#166534; border:1px solid rgba(22,163,74,.2); }
.avp-pct.mid{  background:rgba(234,179,8,.12); color:#92400e; border:1px solid rgba(234,179,8,.25); }
.avp-pct.low{  background:rgba(239,68,68,.12); color:#991b1b; border:1px solid rgba(239,68,68,.24); }

/* bar track */
.avp-track{
  height:10px; border-radius:999px; background:#e8eef8; position:relative;
  overflow:hidden; margin:8px 0 6px; 
}
/* delivered (green) & lost (red) segments */
.avp-delivered, .avp-lost{
  position:absolute; top:0; height:100%;
}
.avp-delivered{ left:0; background:#16A34A; }
.avp-lost{ background:#EF4444; }

/* inline totals on right */
.avp-meta{ display:flex; justify-content:space-between; font-weight:700; }
.avp-meta .del{ color:#16A34A; }
.avp-meta .los{ color:#EF4444; }
.avp-meta .tot{ color:#6b7280; }

/* same height cards */
.same-h{ height: 600px; display:flex; flex-direction:column; }
.same-h .card-body{ flex:1; display:flex; flex-direction:column; }

/* Pointer cursor for Plotly bars (robust selectors) */
.js-plotly-plot .barlayer path,
.js-plotly-plot .barlayer rect,
.js-plotly-plot .bars path,
.js-plotly-plot .bars rect,
.js-plotly-plot .scatterlayer .points path {
  cursor: pointer !important;
}

/* --- KPI Modal (PCH → Projects → Locations) --- */
.pch-header{
  background: var(--surface-header);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  margin: 6px 0 12px;
}
.pch-section .accordion-item{
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}
.pch-section .accordion-button{
  font-weight: 700;
}
.pch-section .badge{ font-weight: 700; }

/* Bigger numbers on project tiles for readability */
.proj-badges .badge{
  font-size: 1rem;    /* increase number size */
  padding: 6px 10px;
}



/* === Topbar (Figma-like) === */
.topbar{
  display:flex;
  align-items:flex-start;
  gap:16px;
  padding:8px 4px 20px 4px;
}

.topbar__icon{ flex:0 0 auto; }

.brand-badge{
  width:44px; height:44px;
  border-radius:14px;
  background: linear-gradient(180deg,#2563eb 0%, #1d4ed8 100%);
  box-shadow: var(--shadow-2);
  display:flex; align-items:center; justify-content:center;
}
.brand-badge__icon{ display:flex; line-height:0; }

.topbar__text{ display:flex; flex-direction:column; gap:6px; }
.topbar__title{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
  font-weight: 800;
  font-size: 34px;
  letter-spacing: .2px;
  color: #1f2937; /* slate-800 */
}

.topbar__meta{
  display:flex; align-items:center;
  gap:8px;
  font-size: 15px;
  font-weight: 600;
  color: #64748B; /* slate-500/600 */
  background: #f1f5f9;   /* subtle chip bg */
  border: 1px solid #E6E9F0;
  padding: 6px 10px;
  width: fit-content;
  border-radius: 999px;
  box-shadow: var(--shadow-1);
}

/* small tweaks for tighter top spacing on narrow screens */
@media (max-width: 640px){
  .topbar__title{ font-size: 28px; }
  .brand-badge{ width:40px; height:40px; border-radius:12px; }
}



/* === Project Overview Card (3-column, responsive) === */
.project-card { 
  background: #f0f6ff;                 /* soft blue like your screenshot */
  border-radius: 16px;
  box-shadow: 0 8px 30px rgba(0,0,0,.06);
  padding: 24px 28px;
  border: none;
}

.project-card__head { margin-bottom: 14px; }

.project-card__title {
  font-size: 20px;
  font-weight: 700;
  color: #0f172a;
  letter-spacing: .2px;
}

.project-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  column-gap: 48px;
  row-gap: 10px;
}

.project-col { display: flex; flex-direction: column; }

.project-label {
  font-size: 13px;
  font-weight: 600;
  letter-spacing: .06em;
  color: #64748B;
  text-transform: uppercase;
  margin: 12px 0 2px;
}

.project-value {
  font-size: 16px;
  font-weight: 800;
  color: #0f172a;
  margin: 0 0 4px;
}

/* Responsiveness */
@media (max-width: 992px){
  .project-grid { grid-template-columns: 1fr 1fr; column-gap: 28px; }
  .project-card { padding: 20px 22px; }
  .project-card__title { font-size: 18px; }
  .project-value { font-size: 15px; }
}
@media (max-width: 640px){
  .project-grid { grid-template-columns: 1fr; row-gap: 8px; }
  .project-card { padding: 16px 16px; }
  .project-card__title { font-size: 17px; }
  .project-label { font-size: 12px; }
  .project-value { font-size: 15px; }
}


/* ===== Project Overview: Professional skin ===== */

/* kill Bootstrap white bg on the outer card; keep only the inner surface */
.project-card-wrap{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* blue, subtle gradient surface with soft outline + elevation */
.project-card{
  background: linear-gradient(180deg, #F6FAFF 0%, #EEF4FF 100%);
  border-radius: 16px;
  border: 1px solid #E3EAFD;
  box-shadow: 0 6px 24px rgba(30, 58, 138, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.65);
  padding: 20px 24px;                 /* tighter than Bootstrap */
}

/* header */
.project-card__head{
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;                /* tighten */
}
.project-card__title{
  font-size: 20px;
  font-weight: 800;
  color: #0F172A;
  letter-spacing: .2px;
  margin: 0;
}

/* 3-column grid */
.project-grid{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  column-gap: 36px;                   /* tighter than before */
  row-gap: 6px;
}

/* column dividers like the screenshot */
.project-grid > .project-col{
  position: relative;
  padding-left: 0;
  padding-right: 24px;
}
.project-grid > .project-col:nth-child(2),
.project-grid > .project-col:nth-child(3){
  padding-left: 28px;
}
.project-grid > .project-col:nth-child(2)::before,
.project-grid > .project-col:nth-child(3)::before{
  content: "";
  position: absolute;
  left: 0; top: 4px; bottom: 4px;
  width: 1px;
  background: linear-gradient(180deg, rgba(208,219,255,0) 0%, #D0DBFF 10%, #D0DBFF 90%, rgba(208,219,255,0) 100%);
}

/* label/value hierarchy */
.project-label{
  font-size: 12.5px;                  /* a hair smaller */
  font-weight: 600;
  letter-spacing: .06em;
  color: #64748B;
  text-transform: uppercase;
  margin: 12px 0 2px;
}
.project-value{
  font-size: 16px;
  font-weight: 800;
  color: #0F172A;
  margin: 0 0 4px;
  line-height: 1.25;
}

/* compact mode on dense layouts (when lots of fields wrap) */
@media (min-width: 1280px){
  .project-grid{ column-gap: 40px; }
}

/* tablet */
@media (max-width: 992px){
  .project-card{ padding: 18px 18px; }
  .project-grid{ grid-template-columns: 1fr 1fr; column-gap: 24px; }
  .project-grid > .project-col:nth-child(2)::before{ display:none; } /* avoid odd mid divider on 2-col */
}

/* phone */
@media (max-width: 640px){
  .project-card{ padding: 14px 14px; }
  .project-card__title{ font-size: 18px; }
  .project-grid{ grid-template-columns: 1fr; row-gap: 4px; }
  .project-grid > .project-col::before{ display:none; }
  .project-label{ font-size: 12px; }
  .project-value{ font-size: 15px; }
}


/* empty message inside the blue card */
.project-empty{
  color: #64748B;
  font-size: 14px;
  font-weight: 600;
  padding: 4px 2px 6px 2px;
}


/* ===== Responsibilities card — compact pills + KPI chips (scoped) ===== */
/* Scope to the card that contains #g-responsibilities so we don't affect anything else */
.card:has(#g-responsibilities) .header-pills {
  display: flex;
  flex-wrap: nowrap;
  gap: 8px;
  align-items: center;
  justify-content: end;
}

.card:has(#g-responsibilities) .header-pills .segment {
  display: inline-flex;
  align-items: center;
  margin: 0;
  box-shadow: var(--shadow-1);
}

/* smallest pills so both groups fit on one line next to the title */
.card:has(#g-responsibilities) .segment.segment-xxs .dash-radio-items label {
  padding: 4px 10px;
  font-size: 13px;
  border-radius: 10px;
  margin-right: 4px;
}
.card:has(#g-responsibilities) .segment.segment-xxs .dash-radio-items input {
  transform: scale(0.82);
}

/* Allow wrap on narrow screens only */
@media (max-width: 991.98px) {
  .card:has(#g-responsibilities) .header-pills {
    flex-wrap: wrap;
    row-gap: 6px;
    justify-content: flex-start;
  }
}

/* KPI chips under the chart — compact boxes, same text sizes */
.card:has(#g-responsibilities) .kpi {
  padding: 6px 10px;
  min-height: 56px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-1);
  background: #fff;
}
.card:has(#g-responsibilities) .kpi .card-body {
  padding: 8px 10px;
  row-gap: 2px;
}
.card:has(#g-responsibilities) .kpi .kpi-value {
  font-size: 22px;
  font-weight: 800;
  line-height: 1.1;
}
.card:has(#g-responsibilities) .kpi .kpi-sub {
  font-size: 13px;
  margin-top: 1px;
  color: #6b7280;
}

/* light color variants matching your screenshot */
.card:has(#g-responsibilities) .kpi.kpi-blue  { background-color: #F1F5FF; color: #0f172a; }
.card:has(#g-responsibilities) .kpi.kpi-red   { background-color: #FFF4F4; color: #0f172a; }
.card:has(#g-responsibilities) .kpi.kpi-green { background-color: #F0FFF6; color: #0f172a; }
.card:has(#g-responsibilities) .kpi.kpi-blue  .kpi-value  { color: #2563EB; }
.card:has(#g-responsibilities) .kpi.kpi-red   .kpi-value  { color: #DC2626; }
.card:has(#g-responsibilities) .kpi.kpi-green .kpi-value  { color: #16A34A; }
/* hide the “hero KPI” corner chip inside these light chips (if present) */
.card:has(#g-responsibilities) .kpi .kpi__icon { display: none; }

/* tighten space between chart and KPI row */
.card:has(#g-responsibilities) .kpi-row-compact { margin-top: 0.35rem; row-gap: 0.5rem; }
/* small bottom margin on the graph */
.card:has(#g-responsibilities) #g-responsibilities { margin-bottom: 0.25rem; }



/* === Standard viz card chrome (border, radius, shadow) === */
.viz-card {
  background: #ffffff;
  border: 1px solid var(--border, #e9eef3);
  border-radius: 14px;
  overflow: hidden;
}

/* match other cards' header/body look */
.viz-card .card-header {
  background: var(--surface-header);
  border-bottom: 1px solid var(--border, #e9eef3);
  padding: 12px 16px;
}
.viz-card .card-body {
  padding: 12px 16px;
}

/* For cards that render the header inside the body (e.g., Gang Performance) */
.viz-card .section-header {
  background: var(--surface-header);
  /* bleed to card edges so the header spans full width */
  margin: -12px -16px 6px -16px;
  padding: 12px 16px;
}

/* soft shadow (keeps your existing variable if defined) */
.shadow-soft {
  box-shadow: 0 10px 18px rgba(2, 8, 23, 0.06), 0 2px 6px rgba(2, 8, 23, 0.04);
}

/* === Vertical gap above both cards (from KPI tiles above) === */
.section-gap-top { margin-top: 16px; }

/* keep legend placed below without crowding the next section */
#\g-projects-over-months { margin-bottom: 4px; } /* escape-safe id selector */



/* ===== Filters strip (scoped) ===== */
.filter-card .filter-field { display: flex; flex-direction: column; }

/* Dropdown chrome */
.filter-card .filter-select .Select-control{
  border:1px solid var(--border, #e6e9f0);
  border-radius:12px;
  box-shadow: var(--shadow-1);
  min-height:44px;
  background:#fff;
}
.filter-card .filter-select .Select-placeholder,
.filter-card .filter-select .Select-value { padding-left:10px; color:#0f172a; }
.filter-card .filter-select .Select-arrow { border-top-color:#64748b; }

/* Quick range radios under Months */
.filter-card .filter-quick-under-months{
  display:flex; align-items:center; gap:14px; flex-wrap:wrap;
}
.filter-card .filter-quick-items .form-check{
  display:inline-flex; align-items:center; margin:0 10px 0 0;
}
.filter-card .filter-quick-items input[type="radio"]{ margin-right:6px; transform:scale(.95); }
.filter-card .filter-quick-items label{ font-weight:600; color:#0f172a; cursor:pointer; }

/* Clear link + Reset button alignment */
.filter-card .filter-clear-link{ font-size:13px; }
.filter-card .filter-reset-btn{ margin-left:0; }

#trace-anchor, #tables-anchor { scroll-margin-top: 80px; }

/* Trace & erection filters styling */
.filter-card .filter-field > .fw-semibold,
.filter-card .filter-field > label {
  color: #0f172a;
}

.filter-card .filter-field > .fw-semibold {
  margin-bottom: 6px;
}

.filter-card .filter-date,
.filter-card .filter-date .DateRangePicker,
.filter-card .filter-date .DateRangePickerInput {
  width: 100%;
}

.filter-card .filter-date .DateRangePickerInput {
  border: 1px solid var(--border, #e6e9f0);
  border-radius: 12px;
  box-shadow: var(--shadow-1);
  background: #fff;
  padding: 6px 10px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-card .filter-date .DateRangePickerInput__withBorder {
  border: none;
}

.filter-card .filter-date .DateInput {
  margin: 0;
}

.filter-card .filter-date .DateInput_input {
  border: none;
  background: transparent;
  padding: 6px 0;
  font-family: "Inter", system-ui;
  font-size: 14px;
  color: #0f172a;
}

.filter-card .filter-date .DateInput_input__focused {
  border: none;
  box-shadow: none;
}

.filter-card .filter-date .DateRangePickerInput_arrow {
  padding: 0 6px;
}

.filter-card .filter-date .DateRangePickerInput_arrow_svg {
  width: 16px;
  height: 16px;
  fill: #64748b;
}

.filter-card .filter-input.form-control {
  border: 1px solid var(--border, #e6e9f0);
  border-radius: 12px;
  box-shadow: var(--shadow-1);
  min-height: 44px;
  background: #fff;
  font-family: "Inter", system-ui;
  font-size: 14px;
  color: #0f172a;
}

.filter-card .filter-input.form-control::placeholder {
  color: #64748b;
}

.filter-card .filter-input.form-control:focus {
  border-color: #2563EB;
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.12);
}


/* === KPI tidy overrides (consistency across modes) === */
/* keep cards the same height regardless of label length */
.kpi { min-height: 138px; }

/* center everything inside KPI tiles */
.kpi .card-body { align-items: center; text-align: center; }
.kpi .kpi-label { text-align: center; width: 100%; white-space: normal; overflow: visible; text-overflow: clip; }
.kpi .kpi-row { justify-content: center; gap: 6px; flex-direction: column; align-items: center; }

/* make secondary metric a neat pill, content-sized and centered */
.kpi .kpi-delta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 30px;
  padding: 0 12px;
  border-radius: 999px;
  background: rgba(255,255,255,.18);
  border: 1px solid rgba(255,255,255,.24);
  color: #fff;
  white-space: nowrap;
  margin-top: 4px;
  margin-left: 0;             /* center under value */
  flex: 0 0 auto !important;  /* override earlier full-width rule */
}
